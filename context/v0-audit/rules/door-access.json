[
  {"id":"door.session.started","description":"Deny entry if current time is before session.startTime.","facts":["session.startTime","now"],"operator":"gtOrEq","left":"now","right":"session.startTime","effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:94-111"},
  {"id":"door.session.notEnded","description":"Deny entry if current time is after session.endTime.","facts":["session.endTime","now"],"operator":"ltOrEq","left":"now","right":"session.endTime","effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:112-129"},
  {"id":"door.location.matchesVenue","description":"Card location must match session venue location.","facts":["card.locationId","session.venueLocationId"],"operator":"eq","left":"card.locationId","right":"session.venueLocationId","effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:572-585"},
  {"id":"door.card.validity.overlapsSession","description":"Card validity window (extended to 4:00 AM next day) must overlap session window.","facts":["card.startDate","card.endDateExtended4am","session.startTime","session.endTime"],"operator":"dateWindowOverlaps","left":["card.startDate","card.endDateExtended4am"],"right":["session.startTime","session.endTime"],"effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:588-645"},
  {"id":"door.freeEntryFlagByTier","description":"Tier-specific free entry flag must be true (Maniac Card or Maniac VIP Card).","facts":["card.tierName","session.maniacCardFreeEntry","session.maniacVipCardFreeEntry"],"operator":"tierFlag","effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:131-164,166-201"},
  {"id":"door.reentry.notAllowed","description":"If reentry is not allowed, deny when prior entries exist.","facts":["session.reentryAllowed","scans.numberOfEntries"],"operator":"implies","left":{"not":"session.reentryAllowed"},"right":{"eq":["scans.numberOfEntries",0]},"effect":"allow","denyOnFail":true,"source":"src/lib/scanning-checks/card-checks.ts:203-226"},
  {"id":"door.godMode.bypass","description":"If issuedCard.godMode is true, bypass other checks.","facts":["issuedCard.godMode"],"operator":"ifTrueBypass","left":"issuedCard.godMode","effect":"allow","denyOnFail":false,"source":"src/lib/scanning-checks/card-checks.ts:82-92"}
]

